{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// додати елементи інтерфесу ✅\n// підключити бібліотеку flatpickr ✅\n// налаштувати бібліотеку\n//\n//\n//\n//\n//\n//\n//\n//\n\n// Описаний в документації\nimport flatpickr from 'flatpickr';\n// Додатковий імпорт стилів\nimport 'flatpickr/dist/flatpickr.min.css';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst elements = {\n  userInput: document.querySelector('input[type=\"text\"]'),\n  strButton: document.querySelector('button[data-start]'),\n  userDays: document.querySelector('span[data-days'),\n  userHours: document.querySelector('span[data-hours'),\n  userMinutes: document.querySelector('span[data-minutes'),\n  userSeconds: document.querySelector('span[data-seconds'),\n};\nconst { userInput, strButton, userDays, userHours, userMinutes, userSeconds } =\n  elements;\n\nstrButton.disabled = true;\nlet userSelectedDate = 0;\nlet timerId = null;\n\nstrButton.addEventListener('click', () => updateCountDown());\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    handlerUserTime(selectedDates[0]);\n    userSelectedDate = selectedDates[0].getTime();\n  },\n};\nflatpickr(userInput, options);\n\nfunction handlerUserTime(timeInput) {\n  if (timeInput.getTime() < new Date().getTime()) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please choose a date in the future',\n    });\n    return;\n  }\n  strButton.disabled = false;\n}\n\nfunction calculatedTimer() {\n  let now = new Date().getTime();\n  let future = userSelectedDate;\n  if (future - now <= 0) {\n    clearTimeout(timerId);\n    return convertMs(0);\n  }\n  strButton.disabled = true;\n  const counter = future - now;\n  const objDate = convertMs(counter);\n  createTimer(objDate);\n  updateCountDown();\n}\n\nfunction createTimer(obj) {\n  userDays.textContent = String(obj.days).padStart(2, '0');\n  userHours.textContent = String(obj.hours).padStart(2, '0');\n  userMinutes.textContent = String(obj.minutes).padStart(2, '0');\n  userSeconds.textContent = String(obj.seconds).padStart(2, '0');\n}\n\nfunction updateCountDown() {\n  timerId = setTimeout(calculatedTimer, 1000);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = String(Math.floor(ms / day)).padStart(2, '0');\n  // Remaining hours\n  const hours = String(Math.floor((ms % day) / hour)).padStart(2, '0');\n  // Remaining minutes\n  const minutes = String(Math.floor(((ms % day) % hour) / minute)).padStart(\n    2,\n    '0'\n  );\n  // Remaining seconds\n  const seconds = String(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  ).padStart(2, '0');\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["elements","userInput","strButton","userDays","userHours","userMinutes","userSeconds","userSelectedDate","timerId","updateCountDown","options","selectedDates","handlerUserTime","flatpickr","timeInput","iziToast","calculatedTimer","now","future","convertMs","counter","objDate","createTimer","obj","ms","days","hours","minutes","seconds"],"mappings":"+IAqBA,MAAMA,EAAW,CACf,UAAW,SAAS,cAAc,oBAAoB,EACtD,UAAW,SAAS,cAAc,oBAAoB,EACtD,SAAU,SAAS,cAAc,gBAAgB,EACjD,UAAW,SAAS,cAAc,iBAAiB,EACnD,YAAa,SAAS,cAAc,mBAAmB,EACvD,YAAa,SAAS,cAAc,mBAAmB,CACzD,EACM,CAAE,UAAAC,EAAW,UAAAC,EAAW,SAAAC,EAAU,UAAAC,EAAW,YAAAC,EAAa,YAAAC,CAAa,EAC3EN,EAEFE,EAAU,SAAW,GACrB,IAAIK,EAAmB,EACnBC,EAAU,KAEdN,EAAU,iBAAiB,QAAS,IAAMO,EAAiB,CAAA,EAE3D,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBC,EAAgBD,EAAc,CAAC,CAAC,EAChCJ,EAAmBI,EAAc,CAAC,EAAE,QAAO,CAC5C,CACH,EACAE,EAAUZ,EAAWS,CAAO,EAE5B,SAASE,EAAgBE,EAAW,CAClC,GAAIA,EAAU,QAAS,EAAG,IAAI,KAAM,EAAC,QAAO,EAAI,CAC9CC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,oCACf,CAAK,EACD,MACD,CACDb,EAAU,SAAW,EACvB,CAEA,SAASc,GAAkB,CACzB,IAAIC,EAAM,IAAI,KAAM,EAAC,QAAO,EACxBC,EAASX,EACb,GAAIW,EAASD,GAAO,EAClB,oBAAaT,CAAO,EACbW,EAAU,CAAC,EAEpBjB,EAAU,SAAW,GACrB,MAAMkB,EAAUF,EAASD,EACnBI,EAAUF,EAAUC,CAAO,EACjCE,EAAYD,CAAO,EACnBZ,GACF,CAEA,SAASa,EAAYC,EAAK,CACxBpB,EAAS,YAAc,OAAOoB,EAAI,IAAI,EAAE,SAAS,EAAG,GAAG,EACvDnB,EAAU,YAAc,OAAOmB,EAAI,KAAK,EAAE,SAAS,EAAG,GAAG,EACzDlB,EAAY,YAAc,OAAOkB,EAAI,OAAO,EAAE,SAAS,EAAG,GAAG,EAC7DjB,EAAY,YAAc,OAAOiB,EAAI,OAAO,EAAE,SAAS,EAAG,GAAG,CAC/D,CAEA,SAASd,GAAkB,CACzBD,EAAU,WAAWQ,EAAiB,GAAI,CAC5C,CAEA,SAASG,EAAUK,EAAI,CAQrB,MAAMC,EAAO,OAAO,KAAK,MAAMD,EAAK,KAAG,CAAC,EAAE,SAAS,EAAG,GAAG,EAEnDE,EAAQ,OAAO,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAAE,SAAS,EAAG,GAAG,EAE7DG,EAAU,OAAO,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,CAAC,EAAE,SAC/D,EACA,GACJ,EAEQI,EAAU,OACd,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAAI,SAAS,EAAG,GAAG,EAEjB,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}